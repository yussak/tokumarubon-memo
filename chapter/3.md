レスポンスメッセージはステータスライン・ヘッダ・空行・ボディからなる  

```
ステータスライン：HTTP/1.1 200 OK
ヘッダ　Server: ..., Date: ..., Content-Type: ...,など
空行
ボディ <body>13.18</body>
```

### ステータスコード
```
1xx => 処理が続いてる
2xx => 正常終了
3xx => リダイレクト
4xx => クライエントエラー
5xx => サーバーエラー
```

Content-Type: MIMEタイプというリソースの種類を指定

### 主なMIMEタイプとその意味
```
text/plain => テキスト
text/html => HTML文書
application/xml => XML文書
text/css => CSS
image/jpeg => JPEG画像
```

HTMLのform要素で指定できる。指定がなければ「application/x-www-form-urlencoded」になる
これは名前＝値の組を＆で繋いだデータ形式

なのでサンプルフォームでPOSTしたらメッセージボディが以下のようになってるのか（簡略化して書いてる
name=%E5%BE%..&mail=toku%40example.jp%gender=%E7%94%B7
これは「パーセントエンコードされてる」と表現する

Content-Length: ボディのバイト数

パーセントエンコーディングは特別な意味を持つ記号や日本語などをURL上に記述するときに使用する
対象の文字をバイト単位で%xxという形式で表す。

パーセントエンコーディングの規約では、スペースは%20で表すが。application/x-www-form-urlencodedの場合は＋に変換する
例
I'm a programmer => I%27m+a+programmer

### Referer
リンク元のURLを示すヘッダ
これによって表示切り替えなど実装してセキュリティ強化になることもあるが、OWASP ZAPのようなツールで改変できてしまう
→必ずしもリンク元を正しく示してるとは限らない！！！
Refererに重要情報（セッションIDなど）が含まれるなど漏えいの可能性あり

### GET POSTの使い分け
```
1. GETメソッドはリソース取得のみに使用、副作用がないことを期待
2. 秘密情報の送信にはPOSTメソッドを使用
```

副作用とは、リソースの取得以外の作用のこと

2について
GETではURL上に指定したパラメータがReferer経由で漏えいしうる（POSTだとないのか？）
パラメータがログやブラウザのアドレスバーに表示されるため

またGETではURLにパラメータを渡すが、ブラウザやサーバーが処理できるURL長さには上限がある。なのでデータ量が多いときにはPOSTを使う

### hiddenパラメータは書き換えできる
検証ツールで見てみたら<input type="hidden" name="gender" value="男">みたいにバリバリ表示されてた・・・でこれの値変えて送信したら簡単に改ざんできてしまった

そして本にあるように、ブラウザでフォーム入力→zapでブレークポイント設定して止めた状態でパラメータ書き換えて送信しても改ざんできた・・・

### hiddenパラメータのメリットとは？
・書き換えはできてしまうものの、情報漏洩や第三者からの書き換え（？）に対しては堅牢であること
・利用者によっても書き換えられては困る認証や認可に関する情報はセッション変数に保存すべき（後述）
・それ以外の情報はまずはhiddenパラメータに保存を検討すべき

→使わない方がいいというわけではないんだな

## クッキーとセッション管理
HTTPはクライアントの現在の状態を覚える設計になってない。これをHTTPのステートレス性という
しかし、アプリで状態を保持したいという状況はよくある

HTTP認証を使わない場合はサーバー側で認証情報を覚える必要がある
これらアプリの状態を覚えておくことをセッション管理という

クッキー=>セッション管理をHTTPで実現するためのもので、「名前=変数」の組みを覚えるよう指示する

ログイン画面にアクセスした状態で、レスポンスヘッダのSet-Cookie: で、サーバーはブラウザに対してクッキー値を覚えるよう指示
Set-Cookie: hoge123のようなランダムな文字列が表示

情報入れてログインするとリクエストにCookie: hoge123が送信される
setしたものを送信するんだな。これでクッキー値覚えられた

クッキーには有効期限を指定できる
指定がない場合にはブラウザを終了させるまで有効

このクッキー値はセッションIDという
セッション変数に格納された情報は、セッションが有効な間いつでもアクセス可能
